(function(e){function t(t){for(var n,i,s=t[0],c=t[1],u=t[2],l=0,p=[];l<s.length;l++)i=s[l],Object.prototype.hasOwnProperty.call(a,i)&&a[i]&&p.push(a[i][0]),a[i]=0;for(n in c)Object.prototype.hasOwnProperty.call(c,n)&&(e[n]=c[n]);d&&d(t);while(p.length)p.shift()();return o.push.apply(o,u||[]),r()}function r(){for(var e,t=0;t<o.length;t++){for(var r=o[t],n=!0,s=1;s<r.length;s++){var c=r[s];0!==a[c]&&(n=!1)}n&&(o.splice(t--,1),e=i(i.s=r[0]))}return e}var n={},a={app:0},o=[];function i(t){if(n[t])return n[t].exports;var r=n[t]={i:t,l:!1,exports:{}};return e[t].call(r.exports,r,r.exports,i),r.l=!0,r.exports}i.m=e,i.c=n,i.d=function(e,t,r){i.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},i.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},i.t=function(e,t){if(1&t&&(e=i(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(i.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var n in e)i.d(r,n,function(t){return e[t]}.bind(null,n));return r},i.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return i.d(t,"a",t),t},i.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},i.p="/online/";var s=window["webpackJsonp"]=window["webpackJsonp"]||[],c=s.push.bind(s);s.push=t,s=s.slice();for(var u=0;u<s.length;u++)t(s[u]);var d=c;o.push([0,"chunk-vendors"]),r()})({0:function(e,t,r){e.exports=r("56d7")},"0d11":function(e,t,r){"use strict";var n=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("app-bg-page",[r("div",[e._t("default",null,{pausedData:e.isPaused})],2),r("ggl-button",{staticClass:"roomId",attrs:{round:"",type:"success",shadow:""}},[e._v("房间号: "+e._s(e.roomInfo.id))]),r("div",{staticClass:"peer-control"},[r("ggl-button",{staticClass:"ggl-margin-btm-20",attrs:{type:"success",shadow:"",circle:"",icon:"link"},on:{click:e.restartIce}}),r("ggl-button",{staticClass:"ggl-margin-btm-20",attrs:{type:e.roomInfo.muted?"warning":"success",shadow:"",circle:"",icon:e.roomInfo.muted?"muted":"laba"},on:{click:e.handleRoomMuted}}),r("ggl-button",{staticClass:"ggl-margin-btm-20",attrs:{type:e.isPaused.audio?"warning":"success",shadow:"",circle:"",icon:e.isPaused.audio?"jingyin":"yuyin"},on:{click:e.handleMicPause}}),e.webcan?r("ggl-button",{staticClass:"ggl-margin-btm-20",attrs:{type:e.isPaused.video?"warning":"success",icon:e.isPaused.video?"close-video":"video",shadow:"",circle:""},on:{click:e.handleRoomWebcan}}):e._e(),e._t("leftControl")],2),r("div",{staticClass:"creater-control"},[e.userInfo.userId===e.roomInfo.creater?r("ggl-button",{attrs:{type:e.roomInfo.paused?"warning":"primary",shadow:"",round:""},on:{click:e.taggleRoomPaused}},[e._v(e._s(e.roomInfo.paused?"全体解禁":"全体禁言"))]):e._e()],1),r("div",{staticClass:"back"},[r("ggl-button",{attrs:{icon:"home",circle:"",type:"primary",shadow:""},on:{click:e.back}})],1)],1)},a=[],o=r("5530"),i=r("3f6b"),s=r("2f62"),c={props:{webcan:{type:Boolean,default:!1}},data:function(){return{}},computed:Object(o["a"])({isPaused:function(){var e={audio:!1,video:!1};for(var t in this.producers){var r=this.producers[t];"audio"===r.kind?e.audio=r.paused:e.video=r.paused}return this.roomInfo.paused&&this.userInfo.userId!==this.roomInfo.creater&&(e.audio=!0),e}},Object(s["c"])(["userInfo","roomInfo","producers"])),methods:{back:function(){this.$emit("back")},restartIce:function(){this.$emit("restartIce")},handleRoomWebcan:function(){this.$emit("handleRoomWebcan")},handleRoomMuted:function(){this.$emit("handleRoomMuted")},handleMicPause:function(){this.$emit("handleMicPause")},taggleRoomPaused:function(){this.$emit("taggleRoomPaused")}},components:{AppBgPage:i["a"]}},u=c,d=(r("3b19"),r("2877")),l=Object(d["a"])(u,n,a,!1,null,"af02499c",null);t["a"]=l.exports},1:function(e,t){},"106f":function(e,t,r){"use strict";var n=r("b85c"),a=r("5530"),o=r("2f62");t["a"]={props:{data:{type:Object,default:function(){return{}}},speaker:{type:Boolean,default:!1},ownerWebcanPaused:{type:Boolean,default:!1},ownerMicPaused:{type:Boolean,default:!1},muted:{type:Boolean,default:!1}},computed:Object(a["a"])({isOwner:function(){return this.data.id===this.userInfo.userId},isPaused:function(){if(this.data.id===this.userInfo.userId)return{audio:this.ownerMicPaused,video:this.ownerWebcanPaused};var e,t={audio:!1,video:!1},r=Object(n["a"])(this.data.consumers);try{for(r.s();!(e=r.n()).done;){var a=e.value,o=this.consumers[a];o&&"audio"===o.kind&&(t.audio=o.paused),o&&"video"===o.kind&&(t.video=o.paused)}}catch(i){r.e(i)}finally{r.f()}return t},fixedVueAudioMutedBug:function(){var e=this,t=this.muted||this.data.muted;return this.$nextTick((function(){var r=e.$refs.audio;r&&(r.muted=t)})),t}},Object(o["c"])(["userInfo","consumers","producers"])),methods:{mutedTap:function(){this.$emit("iconMuteTap",this.data)},mixinSetElementStream:function(e){var t=this.$refs[e.kind];if(t){var r=new MediaStream;r.addTrack(e.track),t.srcObject=r,"function"===typeof this.setStreamCbs&&this.setStreamCbs(e)}}},watch:{"data.consumers":function(e){if(this.data.id!==this.userInfo.userId){var t,r=Object(n["a"])(e);try{for(r.s();!(t=r.n()).done;){var a=t.value,o=this.consumers[a];o&&this.mixinSetElementStream(o)}}catch(i){r.e(i)}finally{r.f()}}}}}},"12c9":function(e,t,r){"use strict";var n=r("a1da"),a=r.n(n);a.a},"137a":function(e,t,r){"use strict";r.r(t);var n=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{class:e.modalClass},[r("div",[r("transition",{attrs:{name:"ggl-modal-opacity"}},[r("div",{directives:[{name:"show",rawName:"v-show",value:e.visible,expression:"visible"}],staticClass:"ggl-modal-dask"})]),r("transition",{attrs:{name:"ggl-modal-fade"},on:{"after-leave":e.handleAfterLeave}},[r("div",{directives:[{name:"show",rawName:"v-show",value:e.visible,expression:"visible"}],staticClass:"ggl-modal-main"},[r("div",{staticClass:"ggl-modal-title"},[r("div",{staticClass:"ggl-modal-title-main"},[e.icon?r("ggl-icon",{staticClass:"ggl-modal-icon",attrs:{color:e.iconColor,type:e.icon}}):e._e(),r("span",{staticClass:"ggl-modal-title-text"},[e._v(e._s(e.title))])],1),e.closable?r("ggl-icon",{staticClass:"ggl-modal-close",attrs:{type:"close"},on:{click:e.close}}):e._e()],1),r("div",{staticClass:"ggl-modal-content"},[e.$slots.content?e._t("content"):r("div",[r("div",[e._v(e._s(e.content))]),"prompt"===e.type?r("div",{staticClass:"ggl-modal-input"},[r("ggl-input",{model:{value:e.value,callback:function(t){e.value=t},expression:"value"}})],1):e._e()])],2),r("div",[e.$slots.footer?e._t("footer"):r("div",{staticClass:"ggl-modal-footer"},["alert"!==e.type?r("ggl-button",{staticClass:"ggl-modal-btn",attrs:{round:e.round,shadow:e.shadow,size:"small",type:e.cancelBtnType},on:{click:e.cancelTap}},[e._v(e._s(e.cancelBtnText))]):e._e(),r("ggl-button",{attrs:{round:e.round,shadow:e.shadow,size:"small",type:e.okBtnType},on:{click:e.okTap}},[e._v(e._s(e.okBtnText))])],1)],2)])])],1)])},a=[],o=r("ade3"),i=r("7bb1"),s=r("18f7"),c=r("ecb6"),u="ggl-modal",d={name:"ggl-modal",props:{type:{type:String,default:"prompt"},icon:{type:String,default:"info"},iconColor:{type:String,default:"#2d8cf0"},closable:{type:Boolean,default:!0},title:{type:String,default:"标题名称"},content:{type:String,default:"我是测试内容"},okBtnText:{type:String,default:"确定"},okBtnType:{type:String,default:"primary"},cancelBtnText:{type:String,default:"取消"},cancelBtnType:{type:String,default:"default"},round:{type:Boolean,default:!1},shadow:{type:Boolean,default:!1},center:{type:Boolean,default:!1}},data:function(){return{removed:!1,visible:!1,value:""}},computed:{modalClass:function(){return["".concat(u),Object(o["a"])({},"".concat(u,"-center"),this.center)]}},methods:{handleAfterLeave:function(){this.removed&&(this.$destroy(!0),this.$el.parentNode.removeChild(this.$el))},show:function(){this.visible=!0},close:function(){this.visible=!1,"function"===typeof this.onClose&&this.onClose(this)},remove:function(){this.removed||(this.visible=!1,this.removed=!0)},cancelTap:function(){this.$emit("cancelTap",this.value),"function"===typeof this.onCancelTap&&this.onCancelTap(this)},okTap:function(){console.log("modal ok tap"),this.$emit("okTap",this.value),"function"===typeof this.onOkTap&&this.onOkTap(this)}},components:{GglButton:s["default"],GglInput:c["default"],GglIcon:i["default"]}},l=d,p=r("2877"),f=Object(p["a"])(l,n,a,!1,null,"46486d76",null);t["default"]=f.exports},"18f7":function(e,t,r){"use strict";r.r(t);var n=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("button",{staticClass:"ggl-btn",class:e.buttonClass,attrs:{disabled:e.disabled},on:{click:e.itemTap}},[e.icon?r("ggl-icon",{staticClass:"ggl-btn-icon",attrs:{color:e.iconColor,type:e.icon}}):e._e(),e._t("default")],2)},a=[],o=r("ade3"),i=r("7bb1"),s=r("8b55"),c="ggl-btn",u={name:"ggl-button",props:{to:{type:String,default:""},round:{type:Boolean,default:!1},circle:{type:Boolean,default:!1},type:{validator:function(e){return Object(s["a"])(e,["default","primary","success","warning","error"])},default:"default"},size:{validator:function(e){return Object(s["a"])(e,["small","large","default"])},default:"default"},disabled:{type:Boolean,default:!1},shadow:{type:Boolean,default:!1},icon:{type:String,default:""},iconColor:{type:String,default:""}},data:function(){return{}},computed:{buttonClass:function(){var e;return["".concat(c,"-size-").concat(this.size),"".concat(c,"-type-").concat(this.type),(e={},Object(o["a"])(e,"".concat(c,"-is-round"),this.round),Object(o["a"])(e,"".concat(c,"-is-disabled"),this.disabled),Object(o["a"])(e,"".concat(c,"-is-shadow"),this.shadow),Object(o["a"])(e,"".concat(c,"-is-circle"),this.circle),e)]}},methods:{itemTap:function(){if(this.to&&""!==this.to)return this.$router.push(this.to);this.$emit("click")}},components:{GglIcon:i["default"]}},d=u,l=r("2877"),p=Object(l["a"])(d,n,a,!1,null,"404d8554",null);t["default"]=p.exports},"1b76":function(e,t,r){},"1e4b":function(e,t,r){"use strict";r.r(t);var n=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",[r("router-view")],1)},a=[],o={redirect:"/login",data:function(){return{}}},i=o,s=r("2877"),c=Object(s["a"])(i,n,a,!1,null,"52412384",null);t["default"]=c.exports},"247b":function(e,t,r){},"267f":function(e,t,r){"use strict";r.r(t);var n=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",[r("router-view")],1)},a=[],o={redirect:"pages/home",data:function(){return{}}},i=o,s=r("2877"),c=Object(s["a"])(i,n,a,!1,null,"c9812ce0",null);t["default"]=c.exports},"2a68":function(e,t,r){var n={"./views":"1e4b","./views/":"1e4b","./views/index":"1e4b","./views/index.vue":"1e4b","./views/login":"9ed6","./views/login/":"9ed6","./views/login/index":"9ed6","./views/login/index.vue":"9ed6","./views/pages":"267f","./views/pages/":"267f","./views/pages/home":"a012","./views/pages/home/":"a012","./views/pages/home/index":"a012","./views/pages/home/index.vue":"a012","./views/pages/index":"267f","./views/pages/index.vue":"267f","./views/pages/meeting-room":"e6b4","./views/pages/meeting-room/":"e6b4","./views/pages/meeting-room/index":"e6b4","./views/pages/meeting-room/index.vue":"e6b4","./views/pages/undercover-game":"3af7","./views/pages/undercover-game/":"3af7","./views/pages/undercover-game/index":"3af7","./views/pages/undercover-game/index.vue":"3af7","./views/pages/voice-room":"c45a","./views/pages/voice-room/":"c45a","./views/pages/voice-room/index":"c45a","./views/pages/voice-room/index.vue":"c45a"};function a(e){return Promise.resolve().then((function(){if(!r.o(n,e)){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}var a=n[e];return r(a)}))}a.keys=function(){return Object.keys(n)},a.id="2a68",e.exports=a},"2f4b":function(e,t,r){},"3aba":function(e,t,r){},"3af7":function(e,t,r){"use strict";r.r(t);var n=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",[e._v(" 谁是卧底 ")])},a=[],o={name:"",data:function(){return{}}},i=o,s=r("2877"),c=Object(s["a"])(i,n,a,!1,null,"1497ce36",null);t["default"]=c.exports},"3b19":function(e,t,r){"use strict";var n=r("3aba"),a=r.n(n);a.a},"3f35":function(e,t,r){"use strict";var n=r("2f4b"),a=r.n(n);a.a},"3f6b":function(e,t,r){"use strict";var n=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"page"},[r("div",{staticClass:"page-moon"},[r("app-moon",{attrs:{url:e.userInfo.headPhoto}})],1),r("div",[e._t("default")],2),r("div",{staticClass:"footer ggl-flex ggl-flex-center"},[r("app-footer")],1)])},a=[],o=r("5530"),i=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"ggl-flex ggl-flex-align"},[r("div",{staticClass:"ggl-flex-1",style:e.lineStyle}),r("div",{staticClass:"ggl-padding-0-20 ggl-text-center",style:e.textStyle},[r("span",[e._v("开源作者：1995郭靖")]),r("span",{staticClass:"ggl-pointer-h ggl-margin-left-10",on:{click:e.itemTap}},[e._v("桂ICP备18001214号-1")])]),r("div",{staticClass:"ggl-flex-1",style:e.lineStyle})])},s=[],c={props:{lineColor:{type:String,default:"rgba(250,250,250,0.2)"},textColor:{type:String,default:"white"}},data:function(){return{}},computed:{lineStyle:function(){return{background:this.lineColor,height:"1px",width:"100px"}},textStyle:function(){return{textColor:this.textColor}}},methods:{itemTap:function(){window.open("http://www.beian.miit.gov.cn")}}},u=c,d=r("2877"),l=Object(d["a"])(u,i,s,!1,null,"59759b2e",null),p=l.exports,f=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"ggl-circle",style:e.moonStyle},[e.url?r("ggl-avatar",{attrs:{size:e.width,src:e.url}}):e._e()],1)},h=[],m=(r("99af"),r("a9e3"),{props:{width:{type:Number,default:60},bgcolor:{type:String,default:"white"},shadowColor:{type:String,default:"white"},shadowWidth:{type:Number,default:15},url:{type:String,default:""}},data:function(){return{}},computed:{moonStyle:function(){return{width:"".concat(this.width,"px"),height:"".concat(this.width,"px"),background:this.bgcolor,boxShadow:"0 0 ".concat(this.shadowWidth,"px ").concat(this.shadowColor)}}}}),v=m,g=Object(d["a"])(v,f,h,!1,null,"4cc4fc2e",null),b=g.exports,w=r("2f62"),y={data:function(){return{}},computed:Object(o["a"])({},Object(w["c"])(["userInfo"])),components:{AppFooter:p,AppMoon:b}},x=y,k=(r("3f35"),Object(d["a"])(x,n,a,!1,null,"616bc4fb",null));t["a"]=k.exports},4360:function(e,t,r){"use strict";var n,a,o,i,s=r("5530"),c=r("2b0e"),u=r("2f62"),d={state:{userInfo:{userId:"",userName:"",headPhoto:""}},mutations:{setUserInfo:function(e,t){e.userInfo.userId=t.userId,e.userInfo.userName=t.userName,e.userInfo.headPhoto=t.headPhoto||""}},getters:{userInfo:function(e){return e.userInfo}}},l=(r("c740"),r("a434"),r("b0c0"),r("ade3")),p=r("b85c"),f=r("d4ec"),h=r("bee2"),m=function(){function e(t){Object(f["a"])(this,e),this.id=t.id,this.name=t.name,this.headPhoto=t.headPhoto,this.isCreater=t.isCreater,this.muted=!1,this.consumers=[]}return Object(h["a"])(e,null,[{key:"create",value:function(t){return new e(Object(s["a"])({id:t.id},t.data))}}]),e}(),v="ADD_PEERS",g="ADD_ONE_PEER",b="DELETE_PEER",w="ADD_PEER_CONSUMER",y="DELETE_PEER_CONSUMER",x="SET_PEER_MUTED",k="CLEAR_PEERS",O={state:{otherPeers:{}},mutations:(n={},Object(l["a"])(n,v,(function(e,t){if(!Array.isArray(t))throw new Error("批量添加其他客户端参数必须为数组");var r,n={},a=Object(p["a"])(t);try{for(a.s();!(r=a.n()).done;){var o=r.value;n[o.id]=m.create(o)}}catch(i){a.e(i)}finally{a.f()}e.otherPeers=Object(s["a"])(Object(s["a"])({},e.otherPeers),n)})),Object(l["a"])(n,g,(function(e,t){e.otherPeers=Object(s["a"])(Object(s["a"])({},e.otherPeers),{},Object(l["a"])({},t.id,m.create(t)))})),Object(l["a"])(n,b,(function(e,t){var r=e.otherPeers[t.id];r&&(delete e.otherPeers[t.id],e.otherPeers=Object(s["a"])({},e.otherPeers))})),Object(l["a"])(n,w,(function(e,t){var r=e.otherPeers[t.producerPeerId];r&&r.consumers.push(t.id)})),Object(l["a"])(n,y,(function(e,t){var r=e.otherPeers[t.peerId];if(r){var n=r.consumers.findIndex((function(e){return e===t.id}));n>-1&&r.consumers.splice(n)}})),Object(l["a"])(n,x,(function(e,t){var r=e.otherPeers[t.peerId];r&&(r.muted=t.muted,e.otherPeers=Object(s["a"])(Object(s["a"])({},e.otherPeers),{},Object(l["a"])({},r.id,r)))})),Object(l["a"])(n,k,(function(e){e.otherPeers={}})),n),getters:{otherPeers:function(e){return e.otherPeers}},actions:{addPeers:function(e,t){var r=e.commit;r(v,t)},addOnePeer:function(e,t){var r=e.commit;r(g,t)},deletePeer:function(e,t){var r=e.commit;r(b,t)},addConsumer:function(e,t){var r=e.commit;console.log("peer add consumer",t),r(w,t)},deleteConsumer:function(e,t){var r=e.commit;r(y,t)},setPeerMuted:function(e,t){var r=e.commit;r(x,t)},clear:function(e){var t=e.commit;t(k)}}},j="SET_OWNER",P={state:{owner:{id:"",name:"",headPhoto:"",consumers:[],produers:[]}},mutations:Object(l["a"])({},j,(function(e,t){e.owner.id=t.id,e.owner.name=t.data.name,e.owner.headPhoto=t.data.headPhoto})),getters:{owner:function(e){return e.owner}},actions:{setOwner:function(e,t){var r=e.commit;r(j,t)}}},R="SET_ROOM_INFO",_="SET_SPEAKER",C="SET_PAUSED",I="CLEAR_ROOM_INFO",T="SET_ROOM_CREATER",E="SET_ROOM_MUTED",S={state:{roomInfo:{id:"",creater:"",speakerId:"",speakerVolume:0,paused:!1,muted:!1}},mutations:(a={},Object(l["a"])(a,R,(function(e,t){e.roomInfo.id=t.id,e.roomInfo.creater=t.creater,e.roomInfo.paused=t.paused})),Object(l["a"])(a,T,(function(e,t){e.roomInfo.creater=t})),Object(l["a"])(a,_,(function(e,t){e.roomInfo.speakerId=t.id,e.roomInfo.speakerVolume=t.volume})),Object(l["a"])(a,C,(function(e,t){e.roomInfo.paused=t})),Object(l["a"])(a,E,(function(e,t){e.roomInfo.muted=t})),Object(l["a"])(a,I,(function(e){e.roomInfo={id:"",creater:"",speakerId:"",speakerVolume:0,paused:!1,muted:!1}})),a),getters:{roomInfo:function(e){return e.roomInfo}},actions:{setRoomInfo:function(e,t){var r=e.commit;r(R,t)},setSpeaker:function(e,t){var r=e.commit;r(_,t)},setRoomMuted:function(e,t){var r=e.commit;r(E,t)},setRoomPaused:function(e,t){var r=e.commit;r(C,t)},setRoomCreater:function(e,t){var r=e.commit;r(T,t)},clear:function(e){var t=e.commit;t(I)}}},M=function(){function e(t){Object(f["a"])(this,e),this.kind=t.kind,this.type=t.type,this.id=t.id,this.paused=t.paused,this.track=t.track,this.rtpParameters=t.rtpParameters,this.appData=t.appData,this.producerId=t.producerId,this.producerPeerId=t.producerPeerId,this.score=t.score}return Object(h["a"])(e,[{key:"setPaused",value:function(e){this.paused=e}}],[{key:"create",value:function(t){return new e(t)}}]),e}(),$="ADD_CONSUMER",D="DELETE_CONSUMER",N="SET_CONSUMER_PAUSED",W="CLEAR_CONUMERS",A={state:{consumers:{}},mutations:(o={},Object(l["a"])(o,$,(function(e,t){var r=M.create(t);e.consumers=Object(s["a"])(Object(s["a"])({},e.consumers),{},Object(l["a"])({},r.id,r))})),Object(l["a"])(o,D,(function(e,t){var r=e.consumers[t.id];r&&(delete e.consumers[r.id],e.consumers=Object(s["a"])({},e.consumers))})),Object(l["a"])(o,N,(function(e,t){var r=e.consumers[t.id];r&&(r.setPaused(t.paused),e.consumers=Object(s["a"])(Object(s["a"])({},e.consumers),{},Object(l["a"])({},r.id,r)))})),Object(l["a"])(o,W,(function(e){e.consumers={}})),o),getters:{consumers:function(e){return e.consumers}},actions:{addConsumer:function(e,t){var r=e.commit;r($,t)},deleteConsumer:function(e,t){var r=e.commit;r(D,t)},setConsumerPaused:function(e,t){var r=e.commit;r(N,t)},clear:function(e){var t=e.commit;t(W)}}},F=function(){function e(t){Object(f["a"])(this,e),this.kind=t.kind,this.id=t.id,this.paused=t.paused,this.track=t.track,this.rtpParameters=t.rtpParameters,this.appData=t.appData,this.score=t.score||""}return Object(h["a"])(e,[{key:"replaceTrack",value:function(e){this.track=e}},{key:"setPaused",value:function(e){this.paused=e}}],[{key:"create",value:function(t){return new e(t)}}]),e}(),U="ADD_PRODUCRER",B="DELETE_PRODUCRER",L="REPLACE_TRACK",z="SET_PRODUCER_PAUSED",G="CLEAR_PRODUCERS",H={state:{producers:{}},mutations:(i={},Object(l["a"])(i,U,(function(e,t){var r=F.create(t);e.producers=Object(s["a"])(Object(s["a"])({},e.producers),{},Object(l["a"])({},r.id,r))})),Object(l["a"])(i,B,(function(e,t){var r=e.producers[t.id];r&&(delete e.producers[r.id],e.producers=Object(s["a"])({},e.producers))})),Object(l["a"])(i,L,(function(e,t){var r=e.producers[t.id];r&&(r.replaceTrack(t.track),e.producers=Object(s["a"])(Object(s["a"])({},e.producers),{},Object(l["a"])({},r.id,r)))})),Object(l["a"])(i,z,(function(e,t){var r=e.producers[t.id];r&&(r.setPaused(t.paused),e.producers=Object(s["a"])(Object(s["a"])({},e.producers),{},Object(l["a"])({},r.id,r)))})),Object(l["a"])(i,G,(function(e){e.producers={}})),i),getters:{producers:function(e){return e.producers}},actions:{addProducer:function(e,t){var r=e.commit;r(U,t)},deleteProducer:function(e,t){var r=e.commit;r(B,t)},replaceTrack:function(e,t){var r=e.commit;r(L,t)},setProducerPaused:function(e,t){var r=e.commit;r(z,t)}}},K={state:{},mutations:{},getters:{},modules:{userInfo:d,otherPeers:O,owner:P,roomInfo:S,producers:H,consumers:A}},V=r("b054"),Y=r.n(V);c["a"].use(u["a"]);var Q=!1;t["a"]=new u["a"].Store(Object(s["a"])(Object(s["a"])({},K),{},{strict:Q,plugins:Q?[Y()()]:[]}))},4368:function(e,t,r){"use strict";r.r(t);var n=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{class:e.avatarClass,style:e.avatarStyle,on:{click:e.avatarTap}},[r("img",{staticClass:"ggl-avatar-img",attrs:{src:e.src}})])},a=[],o=(r("a9e3"),r("ade3")),i="ggl-avatar",s={name:"ggl-avatar",props:{circle:{type:Boolean,default:!0},size:{type:[Number,String],default:50},src:{type:String,default:""}},data:function(){return{}},computed:{avatarClass:function(){return["".concat(i),Object(o["a"])({},"".concat(i,"-is-circle"),this.circle)]},avatarStyle:function(){return{width:"".concat(this.size,"px"),height:"".concat(this.size,"px")}}},methods:{avatarTap:function(){this.$emit("click")}}},c=s,u=r("2877"),d=Object(u["a"])(c,n,a,!1,null,"51e0ec6d",null);t["default"]=d.exports},4599:function(e,t,r){"use strict";r.r(t);r("4160"),r("a434");var n=r("2b0e"),a=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("transition",{attrs:{name:"ggl-message-fade"},on:{"after-leave":e.handleAfterLeave}},[r("div",{directives:[{name:"show",rawName:"v-show",value:e.visible,expression:"visible"}],class:e.noticeClass,style:e.noticeStyle},[e.icon?r("ggl-icon",{staticClass:"ggl-message-icon",attrs:{type:e.icon}}):e._e(),e.text?r("span",{staticClass:"ggl-margin-left-10"},[e._v(e._s(e.text))]):e._e(),e._t("default")],2)])},o=[],i=r("ade3"),s=r("7bb1"),c="ggl-message",u={data:function(){return{visible:!1,icon:"info",type:"info",duration:3e3,center:!1,offsetTop:20,closed:!1,text:""}},computed:{noticeClass:function(){return["".concat(c),"".concat(c,"-type-").concat(this.type),Object(i["a"])({},"".concat(c,"-center"),this.center)]},noticeStyle:function(){return{top:"".concat(this.offsetTop,"px")}}},mounted:function(){this.startTimer()},methods:{handleAfterLeave:function(){this.$destroy(!0),this.$el.parentNode.removeChild(this.$el)},startTimer:function(){var e=this;this.duration>0&&(this.clearTimer(),this.timer=setTimeout((function(){e.closed||e.close()}),this.duration))},close:function(){this.closed=!0,this.visible=!1,this.clearTimer(),"function"===typeof this.onClose&&this.onClose(this)},clearTimer:function(){this.timer&&clearTimeout(this.timer),this.timer=null}},components:{GglIcon:s["default"]}},d=u,l=r("2877"),p=Object(l["a"])(d,a,o,!1,null,"735de570",null),f=p.exports,h="ggl-Message",m=1,v=16,g=[],b=null,w=n["a"].extend(f);function y(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t="".concat(h,"-").concat(m++);"string"===typeof e&&(e={text:e});var r=e.onClose;e.onClose=function(){y.close(t,r)},b=new w({data:e}),b.id=t,b.$mount(),document.body.appendChild(b.$el);var n=20;g.forEach((function(e){var t=e.$el.offsetHeight;n+=t+v})),b.offsetTop=n,b.visible=!0,g.push(b)}var x=["info","success","warning","error"];x.forEach((function(e){y[e]=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return"string"===typeof t&&(t={text:t}),t.type=e,t.icon=e,new y(t)}})),y.close=function(e,t){for(var r=0,n=v,a=0;a<g.length;a++){var o=g[a];if(o.id===e){r=a,n+=o.$el.offsetHeight,"function"===typeof t&&t(),g.splice(a,1);break}}for(var i=r;i<g.length;i++){var s=g[i];s.offsetTop-=n}},y.closeAll=function(){for(var e=g.length-1;e>=0;e--)g[e].close()},y.__$key="$Message";t["default"]=y},"48f8":function(e,t,r){},"4e95":function(e,t,r){var n={"./ggl-message/index.js":"4599","./ggl-modal/index.js":"efcb"};function a(e){var t=o(e);return r(t)}function o(e){if(!r.o(n,e)){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}return n[e]}a.keys=function(){return Object.keys(n)},a.resolve=o,e.exports=a,a.id="4e95"},"56d7":function(e,t,r){"use strict";r.r(t);r("e260"),r("e6cf"),r("cca6"),r("a79d");var n=r("2b0e"),a=(r("4160"),r("b0c0"),r("d3b7"),r("159b"),r("ddb0"),r("247b"),r("f867"),r("bc3a")),o=r.n(a);o.a.interceptors.request.use((function(e){return e}),(function(e){return Promise.reject(e)})),o.a.defaults.timeout=6e4,o.a.interceptors.response.use((function(e){return e}),(function(e){return Promise.reject(e)}));r("8c91");var i=r("5b89");i.keys().forEach((function(e){var t=i(e).default;n["a"].component("".concat(t.name),t)}));var s=r("4e95");s.keys().forEach((function(e){var t=s(e).default,r=t.__$key;n["a"].prototype[r]=t}));var c=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{attrs:{id:"app"}},[r("router-view")],1)},u=[],d={name:"App",methods:{}},l=d,p=r("2877"),f=Object(p["a"])(l,c,u,!1,null,null,null),h=f.exports,m=r("8c4f"),v=(r("d81d"),r("ac1f"),r("5319"),r("1276"),r("d4ec")),g=r("bee2"),b=function(){function e(){Object(v["a"])(this,e)}return Object(g["a"])(e,null,[{key:"create",value:function(t){var r=e.getRouterItems(),n=r.listObject,a=r.list,o=e.setRouterItemTier(n,a);return new t({routes:o})}},{key:"getRouterItems",value:function(){var t=r("f153"),n={},a=t.keys().map((function(r){var a=t(r).default,o=10;r=r.substring(1,r.length-o);var i=e.createRouterItem(a,r);return n[r]=i,i}));return{listObject:n,list:a}}},{key:"createRouterItem",value:function(e,t){var n=t.split("/").length,a=""===t?"/":t;return{pathLv:n,path:a,route:{path:a,redirect:e.redirect,component:function(){return r("2a68")("./views".concat(t))},children:[]}}}},{key:"setRouterItemTier",value:function(e,t){t.sort((function(e,t){return e.pathLv-t.pathLv}));for(var r=t.length-1;r>0;r--){var n=t[r],a=n.path.replace(/([/][^/]+)$/,"");e[a].route.children.push(n.route)}var o=e[""].route;return[o]}}]),e}();n["a"].use(m["a"]);var w=b.create(m["a"]),y=w,x=r("4360"),k=r("a925"),O={i18nList:"列表",i18nEnglish:"英文",i18nChinese:"中文简体",i18nSetting:"设置",i8nPleaseEnter:"请输入",i18nPleaseSelect:"请选择",i18nSupplier:"供应商",i18nPurchaseOrder:"采购订单"},j={i18nList:"list",i18nEnglish:"English",i18nChinese:"Chinese"},P={zh:O,en:j};n["a"].use(k["a"]);var R=new k["a"]({locale:"zh",messages:P}),_=R;n["a"].config.productionTip=!1,new n["a"]({i18n:_,router:y,store:x["a"],render:function(e){return e(h)}}).$mount("#app")},"5b89":function(e,t,r){var n={"./ggl-avatar/index.vue":"4368","./ggl-button/index.vue":"18f7","./ggl-icon/index.vue":"7bb1","./ggl-input/index.vue":"ecb6","./ggl-modal/index.vue":"137a"};function a(e){var t=o(e);return r(t)}function o(e){if(!r.o(n,e)){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}return n[e]}a.keys=function(){return Object.keys(n)},a.resolve=o,e.exports=a,a.id="5b89"},"626b":function(e,t,r){"use strict";var n=r("fc6c"),a=r.n(n);a.a},6397:function(e,t,r){"use strict";var n=r("9b56"),a=r.n(n);a.a},"68f7":function(e,t,r){"use strict";var n=r("48f8"),a=r.n(n);a.a},"77ef":function(e,t,r){"use strict";var n=r("1b76"),a=r.n(n);a.a},"7bb1":function(e,t,r){"use strict";r.r(t);var n=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("i",{class:e.iconClass,style:e.iconStyle,on:{click:e.iconTap}})},a=[],o=(r("a9e3"),"ggl-icon"),i={name:"ggl-icon",props:{type:{type:String,default:""},size:{type:[String,Number],default:""},color:{type:String,default:""}},data:function(){return{}},computed:{iconClass:function(){return["".concat(o),"icon-".concat(this.type)]},iconStyle:function(){return{color:this.color,fontSize:"".concat(this.size,"px")}}},methods:{iconTap:function(){this.$emit("click")}}},s=i,c=r("2877"),u=Object(c["a"])(s,n,a,!1,null,"36689c88",null);t["default"]=u.exports},"7d16":function(e,t,r){"use strict";var n=r("f322"),a=r.n(n);a.a},8729:function(e,t,r){"use strict";r("99af"),r("a15b"),r("96cf");var n=r("1da1"),a=r("5530"),o=(r("c740"),r("a630"),r("4ec9"),r("d3b7"),r("3ca3"),r("ddb0"),r("b85c")),i=r("d4ec"),s=r("bee2"),c=r("262e"),u=r("2caf"),d=r("4599"),l=r("ddfa"),p=r("8055"),f=r.n(p),h=6e4,m=function(){function e(){Object(i["a"])(this,e)}return Object(s["a"])(e,null,[{key:"once",value:function(){var e=Object(n["a"])(regeneratorRuntime.mark((function e(t){var r,n,a,o;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return r=t.socket,n=t.cmd,a=t.data,o=null,e.abrupt("return",new Promise((function(e,t){r.emit(n,a),r.once(n,(function(r){0===r.code?e(r.data):t(r.msg),clearTimeout(o)})),o=setTimeout((function(){t("指令 ".concat(n," 请求超时"))}),h)})));case 3:case"end":return e.stop()}}),e)})));function t(t){return e.apply(this,arguments)}return t}()}]),e}(),v="prodNoCdn",g="development"===v?"wss://localhost:4440":"wss://www.vuecli.com",b=function(){function e(t){var r=t.id,n=t.socket,a=t.data;Object(i["a"])(this,e),this.id=r,this.socket=n,this.data=a}return Object(s["a"])(e,[{key:"once",value:function(){var e=Object(n["a"])(regeneratorRuntime.mark((function e(t){var r,n,a;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return r=t.cmd,n=t.data,e.next=3,m.once({socket:this.socket,cmd:r,data:n});case 3:return a=e.sent,e.abrupt("return",a);case 5:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}()},{key:"close",value:function(){this.socket.close()}}],[{key:"create",value:function(){var t=Object(n["a"])(regeneratorRuntime.mark((function t(r){var n,a,o;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return n=r.id,a=r.data,o=f()("".concat(g)),o.on("error",(function(e){console.log("客户端socket监听到error事件",e)})),o.on("disconnect",(function(e){console.log("客户端socket监听到disconnect",e)})),t.abrupt("return",new e({id:n,data:a,socket:o}));case 5:case"end":return t.stop()}}),t)})));function r(e){return t.apply(this,arguments)}return r}()}]),e}(),w=function(){function e(){Object(i["a"])(this,e),this.events=new Map}return Object(s["a"])(e,[{key:"on",value:function(e,t){var r=this.events.get(e);r||this.events.set(e,[]),this.events.get(e).push(t)}},{key:"emit",value:function(e,t){var r=this.events.get(e);if(r){var n,a=Object(o["a"])(r);try{for(a.s();!(n=a.n()).done;){var i=n.value;i&&i(t)}}catch(s){a.e(s)}finally{a.f()}}}},{key:"promiseEmit",value:function(e,t){var r=this;return new Promise((function(n){r.emit(e,t),n()}))}}]),e}(),y=r("4360"),x={qvga:{width:{ideal:320},height:{ideal:240}},vga:{width:{ideal:640},height:{ideal:480}},hd:{width:{ideal:1280},height:{ideal:720}}},k=function(e){Object(c["a"])(r,e);var t=Object(u["a"])(r);function r(e){var n,a=e.id,o=e.peer,s=e.data,c=e.produce,u=void 0===c||c,d=e.consume,l=void 0===d||d,p=e.resolution,f=void 0===p?"vga":p,h=e.h264,m=void 0!==h&&h,v=e.vp9,g=void 0!==v&&v,b=e.simulcast,w=void 0!==b&&b;return Object(i["a"])(this,r),n=t.call(this),n.id=a,n.peer=o,n.data=s,n.h264=m,n.vp9=g,n.simulcast=w,n.produce=u,n.consume=l,n.resolution=f,n.closed=!1,n.otherPeers=[],n.consumers=new Map,n.sendTransport=null,n.recvTransport=null,n.micProducer=null,n.webcanProducer=null,n.webcans=new Map,n.webcan={deviceId:null},n.mics=new Map,n.mic={deviceId:null},n}return Object(s["a"])(r,[{key:"serverCreateRoom",value:function(){var e=Object(n["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,this.peer.once({cmd:"createRoom",data:{id:this.id,data:this.data,h264:this.h264,vp9:this.vp9,peerId:this.peer.id,peerData:this.peer.data}});case 3:e.next=8;break;case 5:throw e.prev=5,e.t0=e["catch"](0),new Error(e.t0);case 8:case"end":return e.stop()}}),e,this,[[0,5]])})));function t(){return e.apply(this,arguments)}return t}()},{key:"join",value:function(){var e=Object(n["a"])(regeneratorRuntime.mark((function e(){var t;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,this.peer.once({cmd:"connectionRoom",data:{peerId:this.peer.id,roomId:this.id,peerData:this.peer.data}});case 3:return t=e.sent,y["a"].dispatch("setRoomInfo",t),y["a"].dispatch("setOwner",this.peer),this._handleServerNotice(),e.next=9,this._joinRoom();case 9:e.next=14;break;case 11:throw e.prev=11,e.t0=e["catch"](0),new Error(e.t0);case 14:case"end":return e.stop()}}),e,this,[[0,11]])})));function t(){return e.apply(this,arguments)}return t}()},{key:"close",value:function(){var e=Object(n["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(!this.closed){e.next=2;break}return e.abrupt("return");case 2:this.closed=!0,this.peer.close(),y["a"].dispatch("clear"),this.sendTransport&&this.sendTransport.close(),this.recvTransport&&this.recvTransport.close();case 7:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()},{key:"enableWebcan",value:function(){var e=Object(n["a"])(regeneratorRuntime.mark((function e(){var t,r,n=this;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(navigator.mediaDevices&&navigator.mediaDevices.getUserMedia){e.next=2;break}throw new Error("无法访问摄像头设备");case 2:return e.next=4,this._updateWebcans();case 4:return e.next=6,navigator.mediaDevices.getUserMedia({audio:!1,video:Object(a["a"])({deviceId:this.webcan.deviceId},x[this.resolution])});case 6:return t=e.sent,e.next=9,t.getVideoTracks()[0];case 9:if(r=e.sent,this.simulcast){e.next=14;break}return e.next=13,this.sendTransport.produce({track:r});case 13:this.webcanProducer=e.sent;case 14:y["a"].dispatch("addProducer",this.webcanProducer),this.webcanProducer.on("transportclose",(function(){y["a"].dispatch("deleteProducer",{id:n.webcanProducer.id}),n.webcanProducer=null})),this.webcanProducer.on("trackended",(function(){console.log("webcanProducer 所在track关闭")}));case 17:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()},{key:"disableWebcan",value:function(){var e=Object(n["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this._closeProducer(this.webcanProducer);case 2:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()},{key:"tagglePauseWebcan",value:function(){var e=Object(n["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this._tagglePauseProducer(this.webcanProducer);case 2:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()},{key:"pauseWebcan",value:function(){var e=Object(n["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this._producerPause(this.webcanProducer);case 2:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()},{key:"resumeWebcan",value:function(){var e=Object(n["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this._producerResume(this.webcanProducer);case 2:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()},{key:"changeWebcamResolution",value:function(){var e=Object(n["a"])(regeneratorRuntime.mark((function e(t){var r,n,o;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(this.webcanProducer){e.next=2;break}throw new Error("摄像头生产者不存在");case 2:if(r=x[t],r){e.next=5;break}throw new Error("分辨率格式不存在");case 5:return e.prev=5,e.next=8,navigator.mediaDevices.getUserMedia({audio:!1,video:Object(a["a"])({deviceId:this.webcan.deviceId},x[this.resolution])});case 8:return n=e.sent,e.next=11,n.getVideoTracks()[0];case 11:return o=e.sent,e.next=14,this.webcanProducer.replaceTrack({track:o});case 14:y["a"].dispatch("replaceTrack",{id:this.webcanProducer.id,track:o}),e.next=21;break;case 17:throw e.prev=17,e.t0=e["catch"](5),console.error(e.t0),new Error("修改分辨率失败"+e.t0);case 21:case"end":return e.stop()}}),e,this,[[5,17]])})));function t(t){return e.apply(this,arguments)}return t}()},{key:"enableMic",value:function(){var e=Object(n["a"])(regeneratorRuntime.mark((function e(){var t,r,n=this;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(navigator.mediaDevices&&navigator.mediaDevices.getUserMedia){e.next=2;break}throw new Error("无法访问麦克风设备");case 2:return e.next=4,this._updateMics();case 4:return e.next=6,navigator.mediaDevices.getUserMedia({video:!1,audio:{deviceId:this.mic.deviceId,echoCancellation:!0,noiseSuppression:!0}});case 6:return t=e.sent,r=t.getAudioTracks()[0],console.log(this.sendTransport),e.next=11,this.sendTransport.produce({track:r,codecOptions:{opusStereo:1,opusDtx:1}});case 11:this.micProducer=e.sent,y["a"].dispatch("addProducer",this.micProducer),this.micProducer.on("transportclose",(function(){y["a"].dispatch("deleteProducer",{id:n.micProducer.id}),n.micProducer=null})),this.micProducer.on("trackended",(function(){console.log("micproducer 所在track关闭")}));case 15:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()},{key:"disableMic",value:function(){var e=Object(n["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this._closeProducer(this.micProducer);case 2:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()},{key:"tagglePauseMic",value:function(){var e=Object(n["a"])(regeneratorRuntime.mark((function e(){var t;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(t=y["a"].getters.roomInfo,!t.paused||t.creater===this.peer.id){e.next=3;break}return e.abrupt("return",d["default"].error("房间被禁言，无法设置麦克风"));case 3:return e.next=5,this._tagglePauseProducer(this.micProducer);case 5:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()},{key:"pauseMic",value:function(){var e=Object(n["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this._producerPause(this.micProducer);case 2:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()},{key:"resumeMic",value:function(){var e=Object(n["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this._producerResume(this.micProducer);case 2:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()},{key:"taggleRoomPauseMic",value:function(){var e=Object(n["a"])(regeneratorRuntime.mark((function e(){var t;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(t=y["a"].getters.roomInfo.paused,!t){e.next=6;break}return e.next=4,this.resumeRoomMic();case 4:e.next=8;break;case 6:return e.next=8,this.pauseRoomMic();case 8:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()},{key:"pauseRoomMic",value:function(){var e=Object(n["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,this.peer.once({cmd:"pauseRoomAudio",data:{id:this.peer.id}});case 3:e.next=9;break;case 5:throw e.prev=5,e.t0=e["catch"](0),d["default"].error(e.t0),new Error(e.t0);case 9:case"end":return e.stop()}}),e,this,[[0,5]])})));function t(){return e.apply(this,arguments)}return t}()},{key:"resumeRoomMic",value:function(){var e=Object(n["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,this.peer.once({cmd:"resumeRoomMic",data:{id:this.peer.id}});case 3:e.next=9;break;case 5:throw e.prev=5,e.t0=e["catch"](0),d["default"].error(e.t0),new Error(e.t0);case 9:case"end":return e.stop()}}),e,this,[[0,5]])})));function t(){return e.apply(this,arguments)}return t}()},{key:"restartIce",value:function(){var e=Object(n["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(e.prev=0,!this.sendTransport){e.next=4;break}return e.next=4,this._handleRestartIce(this.sendTransport);case 4:if(!this.recvTransport){e.next=7;break}return e.next=7,this._handleRestartIce(this.recvTransport);case 7:d["default"].success("ICE重新连接成功"),e.next=14;break;case 10:throw e.prev=10,e.t0=e["catch"](0),d["default"].error(e.t0),new Error(e.t0);case 14:case"end":return e.stop()}}),e,this,[[0,10]])})));function t(){return e.apply(this,arguments)}return t}()},{key:"_handleRestartIce",value:function(){var e=Object(n["a"])(regeneratorRuntime.mark((function e(t){var r;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this.peer.once({cmd:"restartIce",data:{transportId:t.id}});case 2:return r=e.sent,e.next=5,t.restartIce({iceParameters:r});case 5:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}()},{key:"_tagglePauseProducer",value:function(){var e=Object(n["a"])(regeneratorRuntime.mark((function e(t){var r;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(r=t.paused,console.log("处理生产者 ---\x3e",r),r){e.next=7;break}return e.next=5,this._producerPause(t);case 5:e.next=9;break;case 7:return e.next=9,this._producerResume(t);case 9:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}()},{key:"_producerPause",value:function(){var e=Object(n["a"])(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,t.pause();case 3:return e.next=5,this.peer.once({cmd:"producerPause",data:{producerId:t.id}});case 5:this._storeProducerPaused(t.id,!0),e.next=12;break;case 8:throw e.prev=8,e.t0=e["catch"](0),d["default"].error(e.t0),new Error(e.t0);case 12:case"end":return e.stop()}}),e,this,[[0,8]])})));function t(t){return e.apply(this,arguments)}return t}()},{key:"_producerResume",value:function(){var e=Object(n["a"])(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,t.resume();case 3:return e.next=5,this.peer.once({cmd:"producerResume",data:{producerId:t.id}});case 5:this._storeProducerPaused(t.id,!1),e.next=12;break;case 8:throw e.prev=8,e.t0=e["catch"](0),d["default"].error(e.t0),new Error(e.t0);case 12:case"end":return e.stop()}}),e,this,[[0,8]])})));function t(t){return e.apply(this,arguments)}return t}()},{key:"_updateWebcans",value:function(){var e=Object(n["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this._handleDevice("videoinput",this.webcans,this.webcan,"摄像头不存在");case 2:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()},{key:"_updateMics",value:function(){var e=Object(n["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this._handleDevice("audioinput",this.mics,this.mic,"麦克风不存在");case 2:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()},{key:"_closeProducer",value:function(){var e=Object(n["a"])(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(t){e.next=2;break}throw new Error("设备未启用，无法关闭");case 2:return e.next=4,t.close();case 4:return e.prev=4,e.next=7,this.peer.once({cmd:"closeProducer",data:{producerId:t.id}});case 7:e.next=13;break;case 9:throw e.prev=9,e.t0=e["catch"](4),d["default"].error(e.t0),new Error(e.t0);case 13:y["a"].dispatch("deleteProducer",{id:t.id}),t=null;case 15:case"end":return e.stop()}}),e,this,[[4,9]])})));function t(t){return e.apply(this,arguments)}return t}()},{key:"_handleDevice",value:function(){var e=Object(n["a"])(regeneratorRuntime.mark((function e(t,r,n,a){var o,i;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this._getLocalDevice(t);case 2:if(r=e.sent,o=Array.from(r.values()),!(o.length<=0)){e.next=6;break}throw new Error(a);case 6:i=o.findIndex((function(e){return e.deviceId===n.deviceId})),i<0&&(n.deviceId=o[0].deviceId);case 8:case"end":return e.stop()}}),e,this)})));function t(t,r,n,a){return e.apply(this,arguments)}return t}()},{key:"_getLocalDevice",value:function(){var e=Object(n["a"])(regeneratorRuntime.mark((function e(t){var r,n,a,i,s;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return r=new Map,e.next=3,navigator.mediaDevices.enumerateDevices();case 3:n=e.sent,a=Object(o["a"])(n);try{for(a.s();!(i=a.n()).done;)s=i.value,s.kind===t&&r.set(s.deviceId,s)}catch(c){a.e(c)}finally{a.f()}return e.abrupt("return",r);case 7:case"end":return e.stop()}}),e)})));function t(t){return e.apply(this,arguments)}return t}()},{key:"_handleServerNotice",value:function(){var e=this;this.peer.socket.on("newPeer",(function(e){console.log("监听到有新客户端",e),y["a"].dispatch("addOnePeer",e)})),this.peer.socket.on("newConsumer",function(){var t=Object(n["a"])(regeneratorRuntime.mark((function t(r){var n,a,o,i,s,c,u,d,l,p;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return n=r.producerPeerId,a=r.producerId,o=r.id,i=r.kind,s=r.rtpParameters,c=r.type,u=r.appData,d=r.paused,l=r.score,t.next=3,e.recvTransport.consume({id:o,producerId:a,kind:i,rtpParameters:s,appData:u});case 3:p=t.sent,y["a"].dispatch("addConsumer",{id:o,producerId:a,producerPeerId:n,kind:i,appData:u,type:c,score:l,paused:d,rtpParameters:p.rtpParameters,track:p.track}),p.on("transportclose",(function(){y["a"].dispatch("deleteConsumer",{id:p.id})}));case 6:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()),this.peer.socket.on("consumerProducerClosed",function(){var e=Object(n["a"])(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:console.log("监听到消费者所在的生产者关闭",t),y["a"].dispatch("deleteConsumer",{id:t.id,peerId:t.peerId});case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),this.peer.socket.on("consumerPause",function(){var e=Object(n["a"])(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:console.log("监听到消费者所在的生产者暂停",t),y["a"].dispatch("setConsumerPaused",{id:t.id,paused:!0});case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),this.peer.socket.on("consumerResume",function(){var e=Object(n["a"])(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:console.log("监听到消费者恢复",t),y["a"].dispatch("setConsumerPaused",{id:t.id,paused:!1});case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),this.peer.socket.on("roomCreater",function(){var e=Object(n["a"])(regeneratorRuntime.mark((function e(t){var r;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:r=t.id,y["a"].dispatch("setRoomCreater",r);case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),this.peer.socket.on("roomPausedChange",function(){var e=Object(n["a"])(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:y["a"].dispatch("setRoomPaused",t.paused),console.log("监听到房间禁言状态改变");case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),this.peer.socket.on("speaker",function(){var e=Object(n["a"])(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:t.id,t.volume;case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),this.peer.socket.on("peerClosed",function(){var e=Object(n["a"])(regeneratorRuntime.mark((function e(t){var r;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:r=t.id,y["a"].dispatch("deletePeer",{id:r});case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}())}},{key:"_joinRoom",value:function(){var e=Object(n["a"])(regeneratorRuntime.mark((function e(){var t,r,a,o,i,s,c,u,d,p,f,h,m,v,g,b,w,x=this;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,this.peer.once({cmd:"routerRtpCapabilities"});case 3:return t=e.sent,r=new l["Device"],e.next=7,r.load({routerRtpCapabilities:t});case 7:if(!this.produce){e.next=23;break}return e.prev=8,e.next=11,this.peer.once({cmd:"createWebrtcTransport",data:{produce:!0,consume:!1}});case 11:return a=e.sent,o=a.id,i=a.iceParameters,s=a.iceCandidates,c=a.dtlsParameters,u=a.sctpParameters,e.next=15,r.createSendTransport({id:o,iceParameters:i,dtlsParameters:c,iceCandidates:s,sctpParameters:u});case 15:this.sendTransport=e.sent,this.sendTransport.on("connect",function(){var e=Object(n["a"])(regeneratorRuntime.mark((function e(t,r,n){var a;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return a=t.dtlsParameters,e.prev=1,e.next=4,x.peer.once({cmd:"webrtcTransportConnect",data:{dtlsParameters:a,transportId:x.sendTransport.id}});case 4:r(),e.next=11;break;case 7:e.prev=7,e.t0=e["catch"](1),console.error("通知服务端transprot进行连接失败"),n(e.t0);case 11:case"end":return e.stop()}}),e,null,[[1,7]])})));return function(t,r,n){return e.apply(this,arguments)}}()),this.sendTransport.on("produce",function(){var e=Object(n["a"])(regeneratorRuntime.mark((function e(t,r,n){var a,o,i,s;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return a=t.kind,o=t.rtpParameters,i=t.appData,e.prev=1,e.next=4,x.peer.once({cmd:"produce",data:{appData:i,kind:a,rtpParameters:o,transportId:x.sendTransport.id}});case 4:s=e.sent,r({id:s.id}),e.next=12;break;case 8:e.prev=8,e.t0=e["catch"](1),console.error("通知服务端创建生产者失败",e.t0),n(e.t0);case 12:case"end":return e.stop()}}),e,null,[[1,8]])})));return function(t,r,n){return e.apply(this,arguments)}}()),e.next=23;break;case 20:e.prev=20,e.t0=e["catch"](8),console.error("通知服务端创建produce标记的webrtcTransport 失败",e.t0);case 23:if(!this.consume){e.next=38;break}return e.prev=24,e.next=27,this.peer.once({cmd:"createWebrtcTransport",data:{produce:!1,consume:!0}});case 27:return d=e.sent,p=d.id,f=d.iceParameters,h=d.iceCandidates,m=d.dtlsParameters,v=d.sctpParameters,e.next=31,r.createRecvTransport({id:p,iceParameters:f,dtlsParameters:m,iceCandidates:h,sctpParameters:v});case 31:this.recvTransport=e.sent,this.recvTransport.on("connect",function(){var e=Object(n["a"])(regeneratorRuntime.mark((function e(t,r,n){var a;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return a=t.dtlsParameters,e.prev=1,e.next=4,x.peer.once({cmd:"webrtcTransportConnect",data:{dtlsParameters:a,transportId:x.recvTransport.id}});case 4:r(),e.next=11;break;case 7:e.prev=7,e.t0=e["catch"](1),console.error("通知服务端transprot进行连接失败"),n(e.t0);case 11:case"end":return e.stop()}}),e,null,[[1,7]])})));return function(t,r,n){return e.apply(this,arguments)}}()),e.next=38;break;case 35:e.prev=35,e.t1=e["catch"](24),console.error("通知服务端创建produce标记的webrtcTransport 失败",e.t1);case 38:return e.prev=38,g=r.rtpCapabilities,b=r.sctpCapabilities,e.next=42,this.peer.once({cmd:"join",data:{rtpCapabilities:g,sctpCapabilities:b}});case 42:w=e.sent,y["a"].dispatch("addPeers",w),e.next=49;break;case 46:e.prev=46,e.t2=e["catch"](38),console.log("用户加入房间失败",e.t2);case 49:e.next=54;break;case 51:e.prev=51,e.t3=e["catch"](0),console.error("获取服务端房间router的rtp能力失败",e.t3);case 54:case"end":return e.stop()}}),e,this,[[0,51],[8,20],[24,35],[38,46]])})));function t(){return e.apply(this,arguments)}return t}()},{key:"_storeProducerPaused",value:function(e,t){y["a"].dispatch("setProducerPaused",{id:e,paused:t})}}],[{key:"create",value:function(){var e=Object(n["a"])(regeneratorRuntime.mark((function e(t){var n,a,o,i,s,c,u,d,l,p,f,h,m,v,g,w,y;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return n=t.id,a=t.data,o=t.produce,i=void 0===o||o,s=t.consume,c=void 0===s||s,u=t.resolution,d=void 0===u?"vga":u,l=t.h264,p=void 0!==l&&l,f=t.vp9,h=void 0!==f&&f,m=t.simulcast,v=void 0!==m&&m,g=t.peerId,w=t.peerData,e.next=3,b.create({id:g,data:w});case 3:return y=e.sent,e.abrupt("return",new r({id:n,peer:y,data:a,produce:i,consume:c,h264:p,vp9:h,resolution:d,simulcast:v}));case 5:case"end":return e.stop()}}),e)})));function t(t){return e.apply(this,arguments)}return t}()}]),r}(w),O=r("2f62");t["a"]={data:function(){return{room:{}}},computed:Object(a["a"])({},Object(O["c"])(["userInfo","roomInfo"])),methods:Object(a["a"])({back:function(){"function"===typeof this.room.close&&this.room.close(),this.$router.back()},createRoomInstence:function(e){var t=this;return Object(n["a"])(regeneratorRuntime.mark((function r(){var n,a,o,i,s,c,u,d,l,p,f,h,m;return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:return n=e.id,a=e.data,o=void 0===a?{}:a,i=e.vp9,s=void 0!==i&&i,c=e.h264,u=void 0!==c&&c,d=e.simulcast,l=void 0!==d&&d,p=t.userInfo,f=p.userId,h=p.userName,m=p.headPhoto,r.next=4,k.create({id:n,data:o,vp9:s,h264:u,simulcast:l,peerId:f,peerData:{name:h,headPhoto:m}});case 4:t.room=r.sent;case 5:case"end":return r.stop()}}),r)})))()},joinRoom:function(e,t,r){var a=this;return Object(n["a"])(regeneratorRuntime.mark((function n(){return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:if(e){n.next=2;break}return n.abrupt("return",a.$Message.error("房间号不能为空"));case 2:return n.prev=2,n.next=5,a.createRoomInstence({id:e});case 5:if(!t){n.next=8;break}return n.next=8,a.room.serverCreateRoom();case 8:return n.next=10,a.room.join();case 10:return n.next=12,a.room.enableMic();case 12:r&&r(),n.next=18;break;case 15:n.prev=15,n.t0=n["catch"](2),a.$Message.error(n.t0.message);case 18:case"end":return n.stop()}}),n,null,[[2,15]])})))()},restartIce:function(){var e=this;return Object(n["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e.restarting&&e.$Message.warning("正在重新连接中..."),e.restarting=!0,t.next=4,e.room.restartIce();case 4:e.restarting=!1;case 5:case"end":return t.stop()}}),t)})))()},handleMicPause:function(){var e=this;return Object(n["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e.room.tagglePauseMic();case 2:case"end":return t.stop()}}),t)})))()},taggleRoomPaused:function(){var e=this;return Object(n["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e.room.taggleRoomPauseMic();case 2:case"end":return t.stop()}}),t)})))()},handleRoomMuted:function(){this.setRoomMuted(!this.roomInfo.muted)},tagglePeerMuted:function(e){this.setPeerMuted({peerId:e.id,muted:!e.muted})},_showEntryModal:function(e){var t=this,r=e.icon,n=e.title,a=e.prefix,o=e.cb;this.$Modal({type:"prompt",icon:r,title:n,content:"请输入房间号",okBtnText:"加入房间",cancelBtnText:"创建房间",cancelBtnType:"success",center:!0,round:!0,shadow:!0,onOkTap:function(e,r){t.joinRoom("".concat(a,"-").concat(r),!1,(function(){o&&o(),e.remove()}))},onCancelTap:function(e,r){t.joinRoom("".concat(a,"-").concat(r),!0,(function(){o&&o(),e.remove()}))},onClose:function(){t.back()}})}},Object(O["b"])(["setRoomMuted","setPeerMuted"]))}},"8b55":function(e,t,r){"use strict";r.d(t,"a",(function(){return o})),r.d(t,"b",(function(){return i}));r("99af"),r("c740"),r("b0c0"),r("b85c");var n=r("359c"),a=r.n(n);function o(e,t){if(!Array.isArray(t))return!1;var r=t.findIndex((function(t){return t===e}));return r>=0}function i(){return a.a.locale="zh_CN","".concat(a.a.name.firstName()).concat(a.a.name.lastName())}},"8c91":function(e,t,r){r("4d63"),r("ac1f"),r("25f0"),r("5319"),Date.prototype.format=function(e){var t={"M+":this.getMonth()+1,"d+":this.getDate(),"h+":this.getHours(),"m+":this.getMinutes(),"s+":this.getSeconds(),"q+":Math.floor((this.getMonth()+3)/3),S:this.getMilliseconds()};for(var r in/(y+)/.test(e)&&(e=e.replace(RegExp.$1,(this.getFullYear()+"").substr(4-RegExp.$1.length))),t)new RegExp("("+r+")").test(e)&&(e=e.replace(RegExp.$1,1==RegExp.$1.length?t[r]:("00"+t[r]).substr((""+t[r]).length)));return e}},"9b56":function(e,t,r){},"9ed6":function(e,t,r){"use strict";r.r(t);var n=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("app-bg-page",[r("div",{staticClass:"main"},[r("img",{staticClass:"ggl-circle",attrs:{src:"images/github.jpeg",width:"70",alt:"",srcset:""}}),r("h1",{staticClass:"title"},[e._v("1995郭靖开源的音视频实时互动应用")]),r("div",{staticClass:"desc ggl-no-wrap"},[e._v("可以用于在线教育，多人会议，社交应用，互动游戏等")]),r("div",{staticClass:"ggl-margin-top-40"},[r("ggl-button",{attrs:{round:"",shadow:"",type:"primary"},on:{click:e.loginTap}},[e._v("互动体验")])],1)])])},a=[],o=(r("96cf"),r("1da1")),i=r("5530"),s=r("2f62"),c=r("8b55"),u=r("3f6b");function d(){var e=["https://i.loli.net/2017/08/21/599a521472424.jpg","https://ss0.bdstatic.com/70cFvHSh_Q1YnxGkpoWK1HF6hhy/it/u=1255562831,358439299&fm=26&gp=0.jpg","https://ss2.bdstatic.com/70cFvnSh_Q1YnxGkpoWK1HF6hhy/it/u=2799479802,1026567032&fm=26&gp=0.jpg","https://ss0.bdstatic.com/70cFvHSh_Q1YnxGkpoWK1HF6hhy/it/u=3553524818,3937568876&fm=11&gp=0.jpg","https://ss3.bdstatic.com/70cFv8Sh_Q1YnxGkpoWK1HF6hhy/it/u=1666882005,4218080920&fm=26&gp=0.jpg","https://ss2.bdstatic.com/70cFvnSh_Q1YnxGkpoWK1HF6hhy/it/u=3868062836,2644852324&fm=26&gp=0.jpg","https://ss3.bdstatic.com/70cFv8Sh_Q1YnxGkpoWK1HF6hhy/it/u=2701144551,221903892&fm=26&gp=0.jpg","https://ss3.bdstatic.com/70cFv8Sh_Q1YnxGkpoWK1HF6hhy/it/u=1940916231,627575868&fm=26&gp=0.jpg","https://ss3.bdstatic.com/70cFv8Sh_Q1YnxGkpoWK1HF6hhy/it/u=3480282013,1901562090&fm=26&gp=0.jpg","https://ss3.bdstatic.com/70cFv8Sh_Q1YnxGkpoWK1HF6hhy/it/u=160847753,3690735130&fm=26&gp=0.jpg","https://ss2.bdstatic.com/70cFvnSh_Q1YnxGkpoWK1HF6hhy/it/u=1743928632,1215049526&fm=26&gp=0.jpg","https://ss1.bdstatic.com/70cFvXSh_Q1YnxGkpoWK1HF6hhy/it/u=1978777599,1202188066&fm=26&gp=0.jpg","https://ss0.bdstatic.com/70cFuHSh_Q1YnxGkpoWK1HF6hhy/it/u=1391427192,3546666026&fm=26&gp=0.jpg","https://ss0.bdstatic.com/70cFuHSh_Q1YnxGkpoWK1HF6hhy/it/u=17578245,3726792031&fm=26&gp=0.jpg","https://ss2.bdstatic.com/70cFvnSh_Q1YnxGkpoWK1HF6hhy/it/u=795626259,2483677727&fm=15&gp=0.jpg"],t=Math.random()*e.length|0;return e[t]}var l={data:function(){return{}},methods:Object(i["a"])({loginTap:function(){var e=this;return Object(o["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:e.setUserInfo({userId:"ggl-".concat(1e4*Math.random()|0),userName:Object(c["b"])(),headPhoto:d()}),e.$router.push("/pages");case 2:case"end":return t.stop()}}),t)})))()}},Object(s["d"])(["setUserInfo"])),components:{AppBgPage:u["a"]}},p=l,f=(r("12c9"),r("2877")),h=Object(f["a"])(p,n,a,!1,null,"214c4e77",null);t["default"]=h.exports},a012:function(e,t,r){"use strict";r.r(t);var n=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("app-bg-page",[r("div",{staticClass:"content"},[r("div",{staticClass:"ggl-font-20 ggl-margin-btm-20"},[e._v("游戏大厅")]),r("div",{staticClass:"ggl-text-center"},e._l(e.gameList,(function(t){return r("ggl-button",{key:t.page,staticClass:"ggl-margin-10",attrs:{round:"",shadow:"",type:"primary",to:t.path,disabled:t.disabled}},[e._v(e._s(t.title))])})),1)]),r("ggl-button",{staticClass:"out",attrs:{shadow:"",circle:"",type:"error",icon:"error"},on:{click:e.outTap}})],1)},a=[],o=r("3f6b"),i={data:function(){return{gameList:[]}},created:function(){this._initUIView()},methods:{outTap:function(){this.$router.back()},gameItemTap:function(e){this.$router.push("/page/".concat(e.path))},_initUIView:function(){this._initGameList()},_initGameList:function(){this.gameList=[{path:"voice-room",title:"语音房"},{path:"meeting-room",title:"多人会议"},{path:"undercover-game",title:"谁是卧底",disabled:!0}]}},components:{AppBgPage:o["a"]}},s=i,c=(r("7d16"),r("2877")),u=Object(c["a"])(s,n,a,!1,null,"5ee691c8",null);t["default"]=u.exports},a1da:function(e,t,r){},c45a:function(e,t,r){"use strict";r.r(t);var n=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("app-room",{on:{back:e.back,handleRoomMuted:e.handleRoomMuted,handleMicPause:e.handleMicPause,taggleRoomPaused:e.taggleRoomPaused,restartIce:e.restartIce},scopedSlots:e._u([{key:"default",fn:function(t){return r("div",{staticClass:"otherpeer"},e._l(e.otherPeers,(function(n){return r("voice-peer",{key:n.id,class:[e.roomInfo.creater===n.id?"creater":"peer"],attrs:{speaker:e.roomInfo.speakerId===n.id,ownerMicPaused:t.pausedData.audio,data:n,muted:e.roomInfo.muted},on:{iconMuteTap:e.tagglePeerMuted}})})),1)}}])})},a=[],o=r("5530"),i=r("0d11"),s=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"voice-user"},[r("ggl-avatar",{class:e.avatarClass,attrs:{src:e.data.headPhoto,size:"60"}}),r("div",{staticClass:"ggl-flex ggl-flex-align",style:e.textStyle},[r("ggl-icon",{attrs:{size:"18",type:e.isPaused.audio?"jingyin":"yuyin"}}),r("span",{staticClass:"ggl-margin-0-5",style:{color:e.isOwner?"yellow":""}},[e._v(e._s(e.data.name))]),r("ggl-icon",{attrs:{size:"18",type:e.fixedVueAudioMutedBug?"muted":"laba"},on:{click:e.mutedTap}})],1),r("audio",{ref:"audio",attrs:{autoplay:""}})],1)},c=[],u=r("106f"),d={mixins:[u["a"]],data:function(){return{}},computed:{avatarClass:function(){return["shadow",{speaker:this.speaker}]},textStyle:function(){return{color:this.speaker?"#ff9900":""}}}},l=d,p=(r("77ef"),r("2877")),f=Object(p["a"])(l,s,c,!1,null,"0057842f",null),h=f.exports,m=r("8729"),v=r("2f62"),g={mixins:[m["a"]],data:function(){return{}},computed:Object(o["a"])({},Object(v["c"])(["roomInfo","otherPeers"])),mounted:function(){this._showEntryModal({icon:"yuyin",title:"欢迎来到语音房",prefix:"vioce"})},components:{AppRoom:i["a"],VoicePeer:h}},b=g,w=(r("68f7"),Object(p["a"])(b,n,a,!1,null,"40302066",null));t["default"]=w.exports},e6b4:function(e,t,r){"use strict";r.r(t);var n=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("app-room",{attrs:{webcan:""},on:{back:e.back,handleRoomMuted:e.handleRoomMuted,handleMicPause:e.handleMicPause,taggleRoomPaused:e.taggleRoomPaused,handleRoomWebcan:e.handleRoomWebcan,restartIce:e.restartIce},scopedSlots:e._u([{key:"default",fn:function(t){return r("div",{},[r("div",{staticClass:"otherpeer"},e._l(e.otherPeers,(function(n){return r("meeting-peer",{key:n.id,class:[e.roomInfo.creater===n.id?"creater":"peer"],attrs:{speaker:e.roomInfo.speakerId===n.id,ownerMicPaused:t.pausedData.audio,ownerWebcanPaused:t.pausedData.video,data:n,muted:e.roomInfo.muted},on:{iconMuteTap:e.tagglePeerMuted}})})),1),r("ggl-modal",{ref:"modal",attrs:{center:"",title:"温馨提示"}},[r("div",{staticClass:"ggl-text-center",attrs:{slot:"content"},slot:"content"},[r("div",{staticClass:"ggl-margin-btm-20"},[e._v("请选则视频格式")]),e._l(e.resolutionOptions,(function(t){return r("ggl-button",{key:t.value,staticClass:"ggl-margin-0-10",attrs:{type:"primary"},on:{click:function(r){return e.selectResolutionTap(t)}}},[e._v(e._s(t.text))])}))],2),r("div",{attrs:{slot:"footer"},slot:"footer"})])],1)}}])},[r("div",{attrs:{slot:"leftControl"},slot:"leftControl"},[r("ggl-button",{staticClass:"ggl-margin-btm-20",attrs:{type:"success",shadow:"",circle:""},on:{click:e.changeVideoResolution}},[e._v(e._s(e.resolutionText))])],1)])},a=[],o=(r("96cf"),r("1da1")),i=r("5530"),s=r("0d11"),c=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"meeting-peer"},[r("video",{ref:"video",class:e.videoClass,attrs:{autoplay:"",playinline:"",muted:""},domProps:{muted:!0}}),r("div",{directives:[{name:"show",rawName:"v-show",value:e.videoInfo,expression:"videoInfo"}],staticClass:"info"},[e._v("视频加载中")]),r("ggl-avatar",{directives:[{name:"show",rawName:"v-show",value:e.isPaused.video,expression:"isPaused.video"}],staticClass:"avatar",attrs:{circle:!1,src:e.data.headPhoto,size:"200"}}),r("div",{staticClass:"ggl-margin-top-10 ggl-flex ggl-flex-align ggl-flex-center",style:e.textStyle},[r("ggl-icon",{attrs:{size:"18",type:e.isPaused.audio?"jingyin":"yuyin"}}),r("span",{staticClass:"ggl-margin-0-10",style:{color:e.isOwner?"yellow":""}},[e._v(e._s(e.data.name))]),r("ggl-icon",{class:[e.speaker?"speaker":""],attrs:{size:"18",type:e.fixedVueAudioMutedBug?"muted":"laba"},on:{click:e.mutedTap}})],1),r("audio",{ref:"audio",attrs:{autoplay:""}})],1)},u=[],d=r("2f62"),l=r("106f"),p={mixins:[l["a"]],data:function(){return{videoInfo:!0}},computed:Object(i["a"])({videoClass:function(){return["video"]},textStyle:function(){return{color:this.speaker?"#ff9900":""}}},Object(d["c"])(["producers"])),methods:{setStreamCbs:function(e){"video"===e.kind&&(this.videoInfo=!1)}},watch:{producers:function(e){if(this.data.id===this.userInfo.userId)for(var t in e){var r=e[t],n=this.$refs.video;if("video"===r.kind&&n){if(n.srcObject){var a=n.srcObject.getVideoTracks()[0];if(a===r.track)break}console.log("video track change");var o=new MediaStream;o.addTrack(r.track),n.srcObject=o,this.videoInfo=!1;break}}}}},f=p,h=(r("626b"),r("2877")),m=Object(h["a"])(f,c,u,!1,null,"76de9628",null),v=m.exports,g=r("8729"),b={mixins:[g["a"]],data:function(){return{resolutionText:"高清",resolutionOptions:[]}},computed:Object(i["a"])({},Object(d["c"])(["roomInfo","otherPeers"])),created:function(){this._initUIView()},mounted:function(){var e=this;this._showEntryModal({icon:"video",title:"欢迎来到会议室",prefix:"meeting",cb:function(){var t=Object(o["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e.enableWebcan();case 2:case"end":return t.stop()}}),t)})));function r(){return t.apply(this,arguments)}return r}()})},methods:{enableWebcan:function(){var e=this;return Object(o["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e.room.enableWebcan();case 2:case"end":return t.stop()}}),t)})))()},handleRoomWebcan:function(){var e=this;return Object(o["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e.room.tagglePauseWebcan();case 2:case"end":return t.stop()}}),t)})))()},changeVideoResolution:function(){var e=this;return Object(o["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:e.$refs.modal.show();case 1:case"end":return t.stop()}}),t)})))()},selectResolutionTap:function(e){var t=this;return Object(o["a"])(regeneratorRuntime.mark((function r(){return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:return r.prev=0,t.$refs.modal.close(),r.next=4,t.room.changeWebcamResolution(e.value);case 4:t.resolutionText=e.text,r.next=10;break;case 7:r.prev=7,r.t0=r["catch"](0),t.$Message.error(r.t0);case 10:case"end":return r.stop()}}),r,null,[[0,7]])})))()},_initUIView:function(){this._initOptions()},_initOptions:function(){this.resolutionOptions=[{text:"超清",value:"hd"},{text:"高清",value:"vga"},{text:"标清",value:"qvga"}]}},components:{AppRoom:s["a"],MeetingPeer:v}},w=b,y=(r("6397"),Object(h["a"])(w,n,a,!1,null,"0164983c",null));t["default"]=y.exports},ecb6:function(e,t,r){"use strict";r.r(t);var n=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{class:e.inputClass},[e.prefixIcon?r("ggl-icon",{staticClass:"ggl-input-icon ggl-prefix-icon",attrs:{type:e.prefixIcon}}):e._e(),r("input",{staticClass:"ggl-input-inner",attrs:{disabled:e.disabled,type:e.type},domProps:{value:e.value},on:{input:e.inputChange}}),e.suffixIcon?r("ggl-icon",{staticClass:"ggl-input-icon ggl-suffix-icon",attrs:{type:e.suffixIcon}}):e._e()],1)},a=[],o=(r("a9e3"),r("ade3")),i=r("7bb1"),s="ggl-input",c={name:"ggl-input",props:{type:{type:String,default:"text"},value:{type:[String,Number],default:""},maxlength:{type:Number},placeholder:{type:String,default:""},disabled:{type:Boolean,default:!1},size:{type:String,default:"default"},prefixIcon:{type:String,default:""},suffixIcon:{type:String,default:""},autofocus:{type:Boolean,default:!1}},model:{prop:"value",event:"change"},data:function(){return{}},computed:{inputClass:function(){var e;return["".concat(s),"".concat(s,"-").concat(this.size),(e={},Object(o["a"])(e,"".concat(s,"-disabled"),this.disabled),Object(o["a"])(e,"".concat(s,"-prefix"),this.prefixIcon),Object(o["a"])(e,"".concat(s,"-suffix"),this.suffixIcon),e)]}},methods:{inputChange:function(e){this.$emit("change",e.target.value)}},components:{GglIcon:i["default"]}},u=c,d=r("2877"),l=Object(d["a"])(u,n,a,!1,null,"7d483326",null);t["default"]=l.exports},efcb:function(e,t,r){"use strict";r.r(t);r("a434");var n=r("15fd"),a=r("2b0e"),o=r("137a"),i="ggl-modal",s=1,c=null,u=[],d=a["a"].extend(o["default"]);function l(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t="".concat(i,"-").concat(s++);if("string"===typeof e)throw new Error("options 必须为object");var r=e.onOkTap,a=e.onCancelTap,o=e.onClose,l=Object(n["a"])(e,["onOkTap","onCancelTap","onClose"]),f={onOkTap:r,onCancelTap:a,onClose:o};p(t,f),c=new d({propsData:l,data:f}),c.id=t,c.$mount(),document.body.appendChild(c.$el),c.visible=!0,u.push(c)}function p(e,t){var r=function(r){if(t.hasOwnProperty(r)){var n=t[r];t[r]=function(){l[r](e,n)}}};for(var n in t)r(n)}l.onCancelTap=l.onOkTap=function(e,t){for(var r=0;r<u.length;r++){var n=u[r];if(n.id===e){"function"===typeof t&&t(n,n.value);break}}},l.onClose=function(e,t){for(var r=0;r<u.length;r++){var n=u[r];if(n.id===e){"function"===typeof t&&t(n),n.remove(),u.splice(r,1);break}}},l.__$key="$Modal",t["default"]=l},f153:function(e,t,r){var n={"./index.vue":"1e4b","./login/index.vue":"9ed6","./pages/home/index.vue":"a012","./pages/index.vue":"267f","./pages/meeting-room/index.vue":"e6b4","./pages/undercover-game/index.vue":"3af7","./pages/voice-room/index.vue":"c45a"};function a(e){var t=o(e);return r(t)}function o(e){if(!r.o(n,e)){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}return n[e]}a.keys=function(){return Object.keys(n)},a.resolve=o,e.exports=a,a.id="f153"},f322:function(e,t,r){},f867:function(e,t,r){},fc6c:function(e,t,r){}});